<div class="row">
  <div class="col-12 mb-4">
    <h2 class="text-center">üìù To-Do List</h2>
    <p class="text-center text-muted">
      Manage your tasks efficiently by adding, editing, and completing your to-dos below.
    </p>
  <div class="col-md-6">
    <div class="form-group">
      <label for="todoTitle"><strong>TODO Title</strong></label>
      <input
        type="text"
        #todoTitleInput
        class="form-control"
        id="todoTitle"
        placeholder="Enter todo title"
        (keyup.enter)="isEditing ? onUpdateTodo() : onTodoAdd()"
      />
      <!-- Show Add button when not editing -->
      <button
        *ngIf="!isEditing"
        (click)="onTodoAdd()"
        type="button"
        class="btn btn-sm btn-block btn-primary mt-4"
      >
        Add Todo
      </button>

      <!-- Show Update and Cancel buttons when editing -->
      <div *ngIf="isEditing" class="mt-4">
        <button
          (click)="onUpdateTodo()"
          type="button"
          class="btn btn-sm btn-success mr-2"
        >
          Update Todo
        </button>
        <button
          (click)="cancelEdit()"
          type="button"
          class="btn btn-sm btn-secondary"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <form>
      <div class="list-group">
        <!-- Show empty state message when no todos exist -->
        <div *ngIf="todoItems.length === 0" class="text-center p-4">
          <div class="alert alert-info" role="alert">
            <h5 class="alert-heading">üìù No Todos Yet!</h5>
            <p class="mb-0">
              Your todo list is empty. Add some todos using the form on the left to get started!
            </p>
          </div>
        </div>

        <!-- Show todo list when items exist -->
        <ul class="list-group" *ngIf="todoItems.length > 0">
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
            [class.border-primary]="editingItem === item"
            [class.bg-light]="editingItem === item"
            *ngFor="let item of todoItems"
          >
            <div class="d-flex align-items-center">
              <label class="d-flex align-items-center mb-0 mr-3">
                <input
                  type="checkbox"
                  class="mr-2"
                  [checked]="item.completed"
                  (change)="onToggleComplete(item)"
                />
                <strong
                  [class.text-muted]="item.completed"
                  [class.text-decoration-line-through]="item.completed"
                >
                  {{ item.title }}
                  <small *ngIf="item.completed" class="ml-2 badge badge-success"
                    >Completed</small
                  >
                </strong>
              </label>
            </div>
            <div>
              <button
                type="button"
                (click)="onEditTodo(item)"
                class="btn btn-sm btn-outline-info mr-2"
                [disabled]="editingItem === item"
              >
                <span *ngIf="editingItem !== item">Edit</span>
                <span *ngIf="editingItem === item">Editing...</span>
              </button>
              <button
                type="button"
                (click)="onRemoveTodo(item)"
                class="btn btn-sm btn-outline-danger"
              >
                Remove
              </button>
            </div>
          </li>
        </ul>
      </div>
    </form>
  </div>
</div>
